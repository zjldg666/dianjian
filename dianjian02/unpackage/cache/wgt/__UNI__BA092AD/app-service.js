if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((n=>t.resolve(e()).then((()=>n))),(n=>t.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}const n=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n};const o=n({data:()=>({strAccount:"",password:"",clientCodes:[],selectedClientCode:""}),onLoad(){this.loadClientCodes()},methods:{loadClientCodes(){uni.request({url:"http://13.94.38.44:8080/CheckList/GetClientCode",method:"GET",success:e=>{const n=JSON.parse(e.data);n&&n.list?(this.clientCodes=n.list.map((e=>e.ClientCode)),t("log","at pages/login/login.vue:44","加载成功:",this.clientCodes)):t("error","at pages/login/login.vue:46","加载客户编码失败:",n?n.message:"无效的返回数据")},fail:e=>{t("error","at pages/login/login.vue:50","加载客户编码失败",e)}})},handleClientCodeChange(e){this.selectedClientCode=this.clientCodes[e.detail.value]},login(){this.strAccount&&this.password&&this.selectedClientCode?uni.request({url:"http://13.94.38.44:8080/CheckList/SignIn",method:"POST",data:{strAccount:this.strAccount,strPswd:this.password,clientcode:this.selectedClientCode},success:e=>{const n=JSON.parse(e.data);t("log","at pages/login/login.vue:71","数据为:",n),!1===n.IsError?(uni.setStorageSync("token",n.token),uni.setStorageSync("username",n.userName),uni.setStorageSync("clientcode",this.selectedClientCode),uni.showToast({title:"登录成功",icon:"success"}),uni.redirectTo({url:"/pages/home/home"})):uni.showToast({title:"用户名或密码错误",icon:"none"})},fail:e=>{t("error","at pages/login/login.vue:93","登录失败",e),uni.showToast({title:"登录失败，请稍后重试",icon:"none"})}}):uni.showToast({title:"请输入完整的登录信息",icon:"none",complete:()=>{uni.reLaunch({url:"/pages/login/login"})}})}}},[["render",function(t,n,o,a,s,i){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"login-box"},[e.createElementVNode("view",{class:"title"},"登录"),e.createElementVNode("picker",{mode:"selector",range:s.clientCodes,onChange:n[0]||(n[0]=(...e)=>i.handleClientCodeChange&&i.handleClientCodeChange(...e))},[e.createElementVNode("view",{class:"picker"},e.toDisplayString(s.selectedClientCode||"选择客户编码"),1)],40,["range"]),e.withDirectives(e.createElementVNode("input",{type:"text",placeholder:" 账号","onUpdate:modelValue":n[1]||(n[1]=e=>s.strAccount=e),class:"input"},null,512),[[e.vModelText,s.strAccount]]),e.withDirectives(e.createElementVNode("input",{type:"password",placeholder:"密码","onUpdate:modelValue":n[2]||(n[2]=e=>s.password=e),class:"input"},null,512),[[e.vModelText,s.password]]),e.createElementVNode("button",{onClick:n[3]||(n[3]=(...e)=>i.login&&i.login(...e)),class:"button"},"登录")])])}]]);const a=n({props:{username:String}},[["render",function(t,n,o,a,s,i){return e.openBlock(),e.createElementBlock("view",{class:"navbar"},[e.createElementVNode("view",{class:"logoBox"},[e.createElementVNode("image",{class:"logo",src:"/static/logo.png",mode:"heightFix"})]),e.createElementVNode("view",{class:"username"},e.toDisplayString(o.username),1),e.createElementVNode("button",{onClick:n[0]||(n[0]=e=>t.$emit("logout")),class:"nabutton"},"退出")])}],["__scopeId","data-v-a07997eb"]]);const s=n({props:{buttons:{type:Array,required:!0}},methods:{handleClick(e){"function"==typeof e&&e()}}},[["render",function(t,n,o,a,s,i){return e.openBlock(),e.createElementBlock("view",{class:"button-group"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.buttons,((t,n)=>(e.openBlock(),e.createElementBlock("view",{key:n,class:"ZujianButton-item"},[e.createElementVNode("button",{disabled:t.disabled,onClick:e=>i.handleClick(t.action),class:"ZujianButton"},[e.createTextVNode(e.toDisplayString(t.label)+" ",1),t.badge?(e.openBlock(),e.createElementBlock("span",{key:0,class:"badge"},e.toDisplayString(t.badge),1)):e.createCommentVNode("",!0)],8,["disabled","onClick"])])))),128))])}],["__scopeId","data-v-9071c233"]]);function i(e,n){uni.scanCode({success:o=>{t("log","at utils/scanAndNavigate.js:4","扫描成功",o),function(e,n,o){const a=uni.getStorageSync("token");uni.request({url:"http://13.94.38.44:8080/CheckList/GetCheckListDetailNew",method:"POST",data:{code:e.substring(0,3),token:a},success:a=>{const s=JSON.parse(a.data);if(s.isError)t("error","at utils/scanAndNavigate.js:41","加载点检详情失败:",s.msg),uni.showToast({title:s.msg,icon:"none"});else{const t=e.substring(0,3).toLowerCase();t===n.SEL_TXT.toLowerCase()?(uni.showToast({title:"巡查点正确",icon:"success"}),o(t,n)):uni.showToast({title:"位置不匹配",icon:"none"})}},fail:e=>{t("error","at utils/scanAndNavigate.js:49","加载点检详情失败",e),uni.showToast({title:"加载点检详情失败",icon:"none"})}})}(o.result,e,n)},fail:e=>{t("error","at utils/scanAndNavigate.js:8","扫描失败",e)}})}const r=n({components:{Navbar:a,ButtonGroup:s},data:()=>({username:uni.getStorageSync("username")||"",buttons:[]}),onLoad(){this.getInspectionItems()},onPullDownRefresh(){this.getInspectionItems((()=>{uni.stopPullDownRefresh()}))},methods:{getInspectionItems(e){const n=uni.getStorageSync("token"),o=uni.getStorageSync("clientcode");uni.request({url:"http://13.94.38.44:8080/CheckList/GetAllCheckListByClientCode",method:"POST",data:{code:o,token:n},success:o=>{const a=JSON.parse(o.data);t("log","at pages/inspection/inspection.vue:50","token:",n),a.isError?t("error","at pages/inspection/inspection.vue:59","加载点检项目失败:",a.message):(this.buttons=a.list.map((e=>({label:e.SEL_ShuoMing,action:()=>i(e,this.loadInspectionDetails)}))),t("log","at pages/inspection/inspection.vue:57","点检项目加载成功:",this.buttons)),e&&e()},fail:n=>{t("error","at pages/inspection/inspection.vue:64","加载点检项目失败",n),e&&e()}})},loadInspectionDetails(e,n){const o=uni.getStorageSync("token");uni.request({url:"http://13.94.38.44:8080/CheckList/GetCheckListDetailNew",method:"POST",data:{code:e,token:o},success:o=>{const a=JSON.parse(o.data);if(a.isError)t("error","at pages/inspection/inspection.vue:89","加载点检详情失败:",a.msg),uni.showToast({title:a.msg,icon:"none"});else{t("log","at pages/inspection/inspection.vue:82","点检详情加载成功:",a.dt),uni.navigateTo({url:`/pages/project/project?id=${encodeURIComponent(e)}&name=${n.SEL_ShuoMing}`}),t("log","at pages/inspection/inspection.vue:87",encodeURIComponent(e))}},fail:e=>{t("error","at pages/inspection/inspection.vue:97","加载点检详情失败",e)}})},logout(){uni.removeStorageSync("username"),uni.redirectTo({url:"/pages/login/login"})}}},[["render",function(t,n,o,a,s,i){const r=e.resolveComponent("navbar"),l=e.resolveComponent("button-group");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createVNode(r,{username:s.username,onLogout:i.logout},null,8,["username","onLogout"]),e.createElementVNode("view",{class:"content"},[e.createVNode(l,{buttons:s.buttons},null,8,["buttons"])])])}]]);async function l(){try{const e=uni.getStorageSync("token");if(!e)return uni.showToast({title:"未登录，请先登录",icon:"none"}),null;const n=await uni.request({url:"http://13.94.38.44:8080/CheckList/GetRemind",method:"POST",data:{token:e}});t("log","at utils/remindUtils.js:18","API Response:",n.data);const o=JSON.parse(n.data);return o.isError?(uni.showToast({title:"获取提醒信息失败",icon:"none"}),null):o.list}catch(e){return t("error","at utils/remindUtils.js:30","获取提醒信息失败",e),uni.showToast({title:"获取提醒信息失败",icon:"none"}),null}}const c=n({components:{Navbar:a,ButtonGroup:s},setup(){const n=e.ref(uni.getStorageSync("username")||""),o=e.ref([]),a=e.ref([]),s=()=>{uni.navigateTo({url:"/pages/inspection/inspection"})},i=async()=>{try{const e=uni.getStorageSync("token");if(!e)return void uni.showToast({title:"未登录，请先登录",icon:"none"});const n=await uni.request({url:"http://13.94.38.44:8080/CheckList/GetMenuList",method:"POST",data:{token:e}});t("log","at pages/home/home.vue:139","API Response:",n.data),t("log","at pages/home/home.vue:140","token",e);const a=JSON.parse(n.data);if(a.isError)uni.showToast({title:"获取菜单失败",icon:"none"});else{const e=[{label:"所有点检",action:s,disable:!1}];o.value=[...e,...a.list.map((e=>({label:e.menu_text,form_name:e.form_name,action:()=>(async e=>{switch(e){case"frmMyChcek":uni.navigateTo({url:"/pages/Mydianjian/Mydianjian"});break;case"frmScanCode":r();break;case"frmRemind":const n=await l();if(t("log","at pages/home/home.vue:44","Remind Data:",n),n){const e=n.filter((e=>e.num>0));t("log","at pages/home/home.vue:47","Exceptions:",e),e.length>0?(uni.setStorageSync("exceptions",JSON.stringify(e)),uni.navigateTo({url:"/pages/remind/remind"})):uni.showToast({title:"暂无异常",icon:"none"})}break;case"frmCheckListReport":uni.navigateTo({url:"/pages/report/report"});break;case"frmCheckPlan":uni.navigateTo({url:"/pages/plan/plan"});break;case"frmCheckConfig":uni.navigateTo({url:"/pages/config/config"});break;default:t("warn","at pages/home/home.vue:77",`未知的表单名称: ${e}`),uni.showToast({title:"无效的表单名称",icon:"none"})}})(e.form_name),disable:!1})))]}}catch(e){t("error","at pages/home/home.vue:164","获取菜单失败",e),uni.showToast({title:"获取菜单失败",icon:"none"})}},r=()=>{uni.scanCode({success:e=>{t("log","at pages/home/home.vue:186","扫描成功",e),c(e.result.substring(0,3))},fail:e=>{t("error","at pages/home/home.vue:190","扫描失败",e)}})},c=e=>{const n=uni.getStorageSync("token");uni.request({url:"http://13.94.38.44:8080/CheckList/GetCheckListDetailNew",method:"POST",data:{code:e,token:n},success:n=>{const o=JSON.parse(n.data);if(t("log","at pages/home/home.vue:206",o),o.isError)t("error","at pages/home/home.vue:236","加载点检详情失败:",o.msg),uni.showToast({title:o.msg,icon:"none"});else{const n=o.dt;if(t("log","at pages/home/home.vue:209","点检详情加载成功:",n),n.length>0){const o=n[0],s=a.value.find((e=>e.SEL_TXT===o.Position));if(t("log","at pages/home/home.vue:215",s),s){const t=s.SEL_ShuoMing;uni.navigateTo({url:`/pages/project/project?id=${encodeURIComponent(e)}&name=${t}`})}else t("error","at pages/home/home.vue:222","未找到对应的点检位置"),uni.showToast({title:"未找到对应的点检位置",icon:"none"})}else t("error","at pages/home/home.vue:229","点检详情为空"),uni.showToast({title:"点检详情为空",icon:"none"})}},fail:e=>{t("error","at pages/home/home.vue:244","加载点检详情失败",e)}})};return e.onMounted((()=>{i(),(async()=>{try{const e=uni.getStorageSync("token");if(!e)return void uni.showToast({title:"未登录，请先登录",icon:"none"});const n=await uni.request({url:"http://13.94.38.44:8080/CheckList/GetPositionByPerson",method:"POST",data:{token:e}});t("log","at pages/home/home.vue:102","API Response:",n.data);const o=JSON.parse(n.data);o.isError?uni.showToast({title:"加载点检位置失败",icon:"none"}):(a.value=o.list,t("log","at pages/home/home.vue:106","点检位置加载成功:",a.value))}catch(e){t("error","at pages/home/home.vue:114","加载点检位置失败",e),uni.showToast({title:"加载点检位置失败",icon:"none"})}})(),(async()=>{const e=await l();if(e){const t=o.value.find((e=>"frmRemind"===e.form_name));if(t){const n=e.filter((e=>e.num>0)).length;t.badge=n>0?n.toString():""}}})()})),{username:n,Menubuttons:o,logout:()=>{uni.removeStorageSync("username"),uni.redirectTo({url:"/pages/login/login"})},positions:a}}},[["render",function(t,n,o,a,s,i){const r=e.resolveComponent("navbar"),l=e.resolveComponent("button-group");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createVNode(r,{username:a.username,onLogout:a.logout},null,8,["username","onLogout"]),e.createElementVNode("view",{class:"content"},[e.createVNode(l,{buttons:a.Menubuttons},null,8,["buttons"])])])}]]),u="/static/dui.png",d="/static/NT.png",m="/static/cuo.png";const g=n({components:{Navbar:a},data:()=>({username:uni.getStorageSync("username")||"",inspectionPoint:{id:"",name:""},inspectionItems:[],currentItemIndex:0,currentProject:""}),onLoad(e){this.inspectionPoint.id=e.id,this.inspectionPoint.name=e.name;const t=uni.getStorageSync("token");this.loadInspectionDetails(this.inspectionPoint.id,t)},onPullDownRefresh(){const e=this.inspectionPoint.id,n=uni.getStorageSync("token");if(!e)return t("error","at pages/project/project.vue:150","id 参数为空"),void uni.stopPullDownRefresh();this.loadInspectionDetails(e,n,(()=>{uni.stopPullDownRefresh()}))},computed:{currentItem(){return this.inspectionItems[this.currentItemIndex]||null}},methods:{loadInspectionDetails(e,n,o){e?(t("log","at pages/project/project.vue:171","请求参数:",{code:e,token:n}),uni.request({url:"http://13.94.38.44:8080/CheckList/GetCheckListDetailNew",method:"POST",data:{code:e,token:n},success:e=>{var n;const a=JSON.parse(e.data);a.isError?t("error","at pages/project/project.vue:191","加载点检详情失败:",a.message):(this.inspectionItems=a.dt.map((e=>({...e,remarks:"",images:[],flag:""}))),this.currentProject=(null==(n=this.inspectionItems[0])?void 0:n.Project)||"",t("log","at pages/project/project.vue:189","点检详情加载成功:",this.inspectionItems)),o&&o()},fail:e=>{t("error","at pages/project/project.vue:196","加载点检详情失败:",e),o&&o()}})):t("error","at pages/project/project.vue:168","id 参数为空")},handleFlagChange(e){this.currentItem.flag=e},prevItem(){this.currentItemIndex>0&&(this.currentItemIndex--,this.currentProject=this.inspectionItems[this.currentItemIndex].Project)},nextOrFinishItem(){if(this.currentItem.flag){if("NG"===this.currentItem.flag){if(!this.currentItem.remarks.trim())return void uni.showToast({title:"请填写点检说明",icon:"none"});if(!this.currentItem.images||0===this.currentItem.images.length)return void uni.showToast({title:"请上传至少一张图片",icon:"none"})}else if("有问题，但已经解决"===this.currentItem.flag&&!this.currentItem.remarks.trim())return void uni.showToast({title:"请填写点检说明",icon:"none"});this.currentItemIndex<this.inspectionItems.length-1?this.nextItem():(t("log","at pages/project/project.vue:243","当前 inspectionItems:",this.inspectionItems),this.saveInspection())}else uni.showToast({title:"请先选择结果",icon:"none"})},nextItem(){this.currentItemIndex<this.inspectionItems.length-1&&(this.currentItemIndex++,this.currentProject=this.inspectionItems[this.currentItemIndex].Project)},uploadImage(){uni.chooseImage({count:9,success:e=>{e.tempFilePaths.length>0&&(this.currentItem.images||this.$set(this.currentItem,"images",[]),this.convertImagesToBase64(e.tempFilePaths))},fail:e=>{t("error","at pages/project/project.vue:273","选择图片失败:",e)}})},convertImagesToBase64(e){Promise.all(e.map((e=>function(e,t="png"){return"string"!=typeof e||""===e.trim()?Promise.reject(new Error("Invalid URL")):new Promise(((n,o)=>{e.startsWith("http")?uni.request({url:e,method:"GET",responseType:"arraybuffer",success:e=>{const o=`data:image/${t};base64,${uni.arrayBufferToBase64(e.data)}`;n(o)},fail:e=>{o(new Error(`Request failed: ${e}`))}}):uni.compressImage({src:e,quality:100,success:e=>{const t=e.tempFilePath;plus.io.resolveLocalFileSystemURL(t,(e=>{e.file((e=>{let t=new plus.io.FileReader;t.onload=e=>{n(e.target.result)},t.readAsDataURL(e)}),(e=>{o(new Error(`File resolution failed: ${e}`))}))}),(e=>{o(new Error(`File resolution failed: ${e}`))}))},fail:e=>{o(new Error(`Compress image failed: ${e}`))}})}))}(e)))).then((e=>{this.currentItem.images.push(...e),t("log","at pages/project/project.vue:282","Base64 图片路径:",this.currentItem.images)})).catch((e=>{t("error","at pages/project/project.vue:284","转换图片为 Base64 编码失败:",e)}))},deleteImage(e){this.currentItem.images.splice(e,1)},saveInspection(){if(!this.inspectionItems||!this.inspectionItems.length)return void t("error","at pages/project/project.vue:294","inspectionItems 未定义或为空");uni.showLoading({title:"正在上传数据..."});const e=uni.getStorageSync("token"),n={token:e,list:this.inspectionItems.map((e=>{const t=new Date,n=`${t.getFullYear()}:${String(t.getMonth()+1).padStart(2,"0")}${String(t.getDate()).padStart(2,"0")}:${String(t.getHours()).padStart(2,"0")}${String(t.getMinutes()).padStart(2,"0")}${String(t.getSeconds()).padStart(2,"0")}`;return{ID:e.ID,Time:n,Flag:e.flag||"NG",FileList:(e.images||[]).map((e=>e)),Remark:e.remarks||""}}))};t("log","at pages/project/project.vue:318","发送到 SaveDetail 接口的数据:",n),uni.request({url:"http://13.94.38.44:8080/CheckList/SaveDetail",method:"POST",header:{"content-type":"application/json"},data:n,success:n=>{if(t("log","at pages/project/project.vue:328","第一次请求返回数据为:",n.data),"string"==typeof n.data)try{const o=JSON.parse(n.data);if(o.isError)uni.showToast({title:o.msg||"保存失败",icon:"none"}),t("error","at pages/project/project.vue:340","保存点检详情失败:",o.msg);else{const t=o.docnum;this.saveFinalResult(t,e)}}catch(o){t("error","at pages/project/project.vue:343","解析第一次请求返回数据时出错:",o)}else t("error","at pages/project/project.vue:346","第一次请求响应数据不是字符串:",n.data)},fail:e=>{t("error","at pages/project/project.vue:350","保存点检详情失败:",e)}})},saveFinalResult(e,n){uni.request({url:"http://13.94.38.44:8080/CheckList/SaveDetail2",method:"POST",data:{docnum:e,token:n},success:e=>{if(t("log","at pages/project/project.vue:364","第二次请求返回数据为:",e.data),"string"==typeof e.data)try{const n=JSON.parse(e.data);n.IsError?(uni.showToast({title:n.msg,icon:"none"}),t("error","at pages/project/project.vue:381","保存检查结果失败:",n.msg)):(uni.showToast({title:"检查成功",icon:"success"}),uni.redirectTo({url:"/pages/home/home"}))}catch(n){t("error","at pages/project/project.vue:384","解析第二次请求返回数据时出错:",n)}else t("error","at pages/project/project.vue:387","第二次请求响应数据不是字符串:",e.data)},fail:e=>{t("error","at pages/project/project.vue:391","保存检查结果失败:",e)}})},logout(){uni.removeStorageSync("username"),uni.redirectTo({url:"/pages/login/login"})}}},[["render",function(t,n,o,a,s,i){const r=e.resolveComponent("navbar");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createVNode(r,{username:s.username,onLogout:i.logout},null,8,["username","onLogout"]),e.createElementVNode("view",{class:"title"},e.toDisplayString(s.inspectionPoint.name)+" > "+e.toDisplayString(s.currentProject),1),e.createElementVNode("view",{class:"content"},[i.currentItem?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"item-title"},e.toDisplayString(i.currentItem.Description),1),e.createElementVNode("view",{class:"form-group"},[e.createElementVNode("label",null,"选择结果："),e.createElementVNode("view",{class:"button-group"},[e.createElementVNode("button",{class:e.normalizeClass({selButton:!0,selected:"OK"===i.currentItem.flag}),onClick:n[0]||(n[0]=e=>i.handleFlagChange("OK"))},[e.createElementVNode("image",{src:u,class:"icon-image"})],2),e.createElementVNode("button",{class:e.normalizeClass({selButton:!0,selected:"有问题，但已经解决"===i.currentItem.flag}),onClick:n[1]||(n[1]=e=>i.handleFlagChange("有问题，但已经解决"))},[e.createElementVNode("image",{src:d,class:"icon-image"})],2),e.createElementVNode("button",{class:e.normalizeClass({selButton:!0,selected:"NG"===i.currentItem.flag}),onClick:n[2]||(n[2]=e=>i.handleFlagChange("NG"))},[e.createElementVNode("image",{src:m,class:"icon-image"})],2)])]),e.createElementVNode("view",{class:"form-group"},[e.createElementVNode("label",null,"点检说明："),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=e=>i.currentItem.remarks=e),class:"input"},null,512),[[e.vModelText,i.currentItem.remarks]])]),e.createElementVNode("view",{class:"form-group"},[e.createElementVNode("label",null,"上传图片："),e.createElementVNode("button",{onClick:n[4]||(n[4]=(...e)=>i.uploadImage&&i.uploadImage(...e)),class:"button"},"+"),i.currentItem.images&&i.currentItem.images.length>0?(e.openBlock(),e.createElementBlock("view",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.currentItem.images,((t,n)=>(e.openBlock(),e.createElementBlock("view",{key:n,class:"image-preview"},[e.createElementVNode("image",{src:t,class:"preview-image"},null,8,["src"]),e.createElementVNode("button",{onClick:e=>i.deleteImage(n),class:"delete-button"},"X",8,["onClick"])])))),128))])):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"button-group"},[e.createElementVNode("button",{onClick:n[5]||(n[5]=(...e)=>i.prevItem&&i.prevItem(...e)),disabled:0===s.currentItemIndex,class:"button"},"上一项",8,["disabled"]),e.createElementVNode("button",{onClick:n[6]||(n[6]=(...e)=>i.nextOrFinishItem&&i.nextOrFinishItem(...e)),class:"button"},e.toDisplayString(s.currentItemIndex===s.inspectionItems.length-1?"点检成功":"下一项"),1)])])])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("view",{class:"message"},"所有点检项目完成")]))])])}],["__scopeId","data-v-85b364cf"]]);const p=n({components:{Navbar:a,ButtonGroup:s},data:()=>({username:uni.getStorageSync("username")||"",positions:[],inspectionButtons:[]}),onLoad(){this.fetchPositions()},methods:{fetchPositions(){const e=uni.getStorageSync("token");uni.request({url:"http://13.94.38.44:8080/CheckList/GetPositionByPerson",method:"POST",data:{token:e},success:e=>{const n=JSON.parse(e.data);n.isError?t("error","at pages/Mydianjian/Mydianjian.vue:48","加载点检位置失败:",n.message):(this.positions=n.list,t("log","at pages/Mydianjian/Mydianjian.vue:45","点检位置加载成功:",this.positions),this.createInspectionButtons())},fail:e=>{t("error","at pages/Mydianjian/Mydianjian.vue:52","加载点检位置失败",e)}})},createInspectionButtons(){this.inspectionButtons=this.positions.map((e=>({label:e.SEL_ShuoMing,action:()=>i(e,this.loadInspectionDetails),disabled:!1})))},loadInspectionDetails(e,n){const o=uni.getStorageSync("token");uni.request({url:"http://13.94.38.44:8080/CheckList/GetCheckListDetailNew",method:"POST",data:{code:e,token:o},success:o=>{const a=JSON.parse(o.data);if(a.isError)t("error","at pages/Mydianjian/Mydianjian.vue:83","加载点检详情失败:",a.msg),uni.showToast({title:a.msg,icon:"none"});else{t("log","at pages/Mydianjian/Mydianjian.vue:76","点检详情加载成功:",a.dt),uni.navigateTo({url:`/pages/project/project?id=${encodeURIComponent(e)}&name=${n.SEL_ShuoMing}`}),t("log","at pages/Mydianjian/Mydianjian.vue:81",encodeURIComponent(e))}},fail:e=>{t("error","at pages/Mydianjian/Mydianjian.vue:91","加载点检详情失败",e)}})},logout(){uni.removeStorageSync("username"),uni.redirectTo({url:"/pages/login/login"})}}},[["render",function(t,n,o,a,s,i){const r=e.resolveComponent("navbar"),l=e.resolveComponent("button-group");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createVNode(r,{username:s.username,onLogout:i.logout},null,8,["username","onLogout"]),e.createElementVNode("view",{class:"content"},[e.createVNode(l,{buttons:s.inspectionButtons},null,8,["buttons"])])])}]]);const h=n({components:{Navbar:a,ButtonGroup:s},data:()=>({username:uni.getStorageSync("username")||"",Menubuttons:[]}),methods:{navigateToException(e){const n=uni.getStorageSync("token");if(t("log","at pages/remind/remind.vue:28",e),t("log","at pages/remind/remind.vue:29","Navigating to YIChang with ID:",e.SEL_TXT,"and Token:",n),!n)return void uni.showToast({title:"未登录，请先登录",icon:"none"});const o=`/pages/YiChang/YiChang?id=${encodeURIComponent(e.SEL_TXT)}&token=${encodeURIComponent(n)}&selShuoMing=${e.SEL_ShuoMing}`;t("log","at pages/remind/remind.vue:38","Navigating to:",o),uni.navigateTo({url:o})},logout(){uni.removeStorageSync("username"),uni.redirectTo({url:"/pages/login/login"})}},mounted(){const e=uni.getStorageSync("exceptions");if(e){try{const n=JSON.parse(e);t("log","at pages/remind/remind.vue:55","Parsed Exceptions:",n),this.Menubuttons=n.map((e=>({label:e.SEL_ShuoMing,action:()=>this.navigateToException(e),disabled:!1,badge:e.num>0?e.num.toString():""})))}catch(n){t("error","at pages/remind/remind.vue:63","解析 exceptions 失败",n)}uni.removeStorageSync("exceptions")}else t("error","at pages/remind/remind.vue:67","未找到 exceptions 参数")}},[["render",function(t,n,o,a,s,i){const r=e.resolveComponent("navbar"),l=e.resolveComponent("button-group");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createVNode(r,{username:s.username,onLogout:i.logout},null,8,["username","onLogout"]),e.createElementVNode("view",{class:"content"},[e.createVNode(l,{buttons:s.Menubuttons},null,8,["buttons"])])])}]]);const v=n({props:{isPreviewVisible:{type:Boolean,required:!0},currentImage:{type:String,required:!0}},methods:{closePreview(){this.$emit("update:isPreviewVisible",!1)}}},[["render",function(t,n,o,a,s,i){return o.isPreviewVisible?(e.openBlock(),e.createElementBlock("view",{key:0,class:"image-viewer-overlay",onClick:n[1]||(n[1]=(...e)=>i.closePreview&&i.closePreview(...e))},[e.createElementVNode("image",{src:"data:image/png;base64,"+o.currentImage,class:"image-viewer-image",onClick:n[0]||(n[0]=e.withModifiers((()=>{}),["stop"]))},null,8,["src"])])):e.createCommentVNode("",!0)}],["__scopeId","data-v-bbd7c8b4"]]);const k=n({components:{Navbar:a,ImageViewer:v},data:()=>({username:uni.getStorageSync("username")||"",details:[],currentIndex:0,selShuoMing:"",isPreviewVisible:!1,currentPreviewIndex:0}),computed:{currentDetail(){return this.details[this.currentIndex]||{}}},methods:{logout(){uni.removeStorageSync("username"),uni.redirectTo({url:"/pages/login/login"})},getRemindDetail(e,n){uni.showLoading({title:"加载中..."});const o={token:n,code:e};uni.request({url:"http://13.94.38.44:8080/CheckList/GetRemindDetail",method:"POST",data:o,success:e=>{const n=JSON.parse(e.data);t("log","at pages/YiChang/YiChang.vue:103",n),n.isError?uni.showToast({title:"加载提醒详情失败",icon:"none"}):(this.details=n.list,this.currentIndex=0)},complete:()=>{uni.hideLoading()},fail:e=>{t("error","at pages/YiChang/YiChang.vue:118","加载提醒详情失败",e),uni.showToast({title:"加载提醒详情失败",icon:"none"})}})},prevItem(){this.currentIndex>0&&this.currentIndex--},nextItem(){this.currentIndex<this.details.length-1&&this.currentIndex++},previewImage(e){t("log","at pages/YiChang/YiChang.vue:137","Clicked image index:",e),t("log","at pages/YiChang/YiChang.vue:138","Images array:",this.currentDetail.FileLists),this.currentPreviewIndex=e,this.isPreviewVisible=!0}},onLoad(e){e&&e.id&&e.token&&e.selShuoMing?(this.getRemindDetail(e.id,e.token),this.selShuoMing=decodeURIComponent(e.selShuoMing),t("log","at pages/YiChang/YiChang.vue:147",e)):t("error","at pages/YiChang/YiChang.vue:149","未找到 id 或 token 参数")}},[["render",function(t,n,o,a,s,i){var r,l,c,g,p,h,v,k,y,E,w;const S=e.resolveComponent("navbar"),N=e.resolveComponent("image-viewer");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createVNode(S,{username:s.username,onLogout:i.logout},null,8,["username","onLogout"]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"header"},e.toDisplayString(s.selShuoMing),1),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检项目:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(null==(r=i.currentDetail)?void 0:r.Project),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检内容:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(null==(l=i.currentDetail)?void 0:l.Description),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检结果:"),e.createElementVNode("text",{class:"value"},["1"===(null==(c=i.currentDetail)?void 0:c.Result)?(e.openBlock(),e.createElementBlock("span",{key:0},[e.createElementVNode("image",{src:u,class:"Fuhao"})])):"3"===(null==(g=i.currentDetail)?void 0:g.Result)?(e.openBlock(),e.createElementBlock("span",{key:1},[e.createElementVNode("image",{src:d,class:"Fuhao"})])):"2"===(null==(p=i.currentDetail)?void 0:p.Result)?(e.openBlock(),e.createElementBlock("span",{key:2},[e.createElementVNode("image",{src:m,class:"Fuhao"})])):e.createCommentVNode("",!0)])]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检说明:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(null==(h=i.currentDetail)?void 0:h.Remark),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检人:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(null==(v=i.currentDetail)?void 0:v.Person),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检时间:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(null==(k=i.currentDetail)?void 0:k.Time1),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"设备时间:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(null==(y=i.currentDetail)?void 0:y.Time3),1)]),e.createElementVNode("view",{class:"images-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((null==(E=i.currentDetail)?void 0:E.FileLists)||[],((t,n)=>(e.openBlock(),e.createElementBlock("image",{key:n,src:"data:image/png;base64,"+t,class:"image",onClick:e=>i.previewImage(n)},null,8,["src","onClick"])))),128))]),e.createElementVNode("view",{class:"navigation-buttons"},[e.createElementVNode("button",{disabled:0===s.currentIndex,onClick:n[0]||(n[0]=(...e)=>i.prevItem&&i.prevItem(...e))},"上一个",8,["disabled"]),e.createElementVNode("button",{disabled:s.currentIndex===s.details.length-1,onClick:n[1]||(n[1]=(...e)=>i.nextItem&&i.nextItem(...e))},"下一个",8,["disabled"])])]),e.createVNode(N,{"is-preview-visible":s.isPreviewVisible,"current-image":(null==(w=i.currentDetail)?void 0:w.FileLists[s.currentPreviewIndex])||"","onUpdate:isPreviewVisible":n[2]||(n[2]=e=>s.isPreviewVisible=e)},null,8,["is-preview-visible","current-image"])])}]]);const y=n({components:{Navbar:a},setup(){const n=e.ref(uni.getStorageSync("username")||""),o=e.ref(null),a=e.ref(!0),s=e.ref((new Date).toISOString().split("T")[0]),i=(new Date).toISOString().split("T")[0],r=async e=>{try{a.value=!0;const n=uni.getStorageSync("token");if(!n)return void uni.showToast({title:"未登录，请先登录",icon:"none"});const s=await uni.request({url:"http://13.94.38.44:8080/CheckList/GetScanReport1New",method:"POST",data:{token:n,time:e}}),i=JSON.parse(s.data);i.isError?uni.showToast({title:"获取报表失败",icon:"none"}):(o.value=i,t("log","at pages/report/report.vue:100","报表数据加载成功:",o.value))}catch(n){t("error","at pages/report/report.vue:108","获取报表失败",n),uni.showToast({title:"获取报表失败",icon:"none"})}finally{a.value=!1}},l=e.ref(!1),c=e.ref(!1);e.watch(s,(e=>{l.value=e<="2000-01-01",c.value=e>=i,d.value=u(e)}),{immediate:!0}),e.onMounted((()=>{r(s.value)}));const u=e=>{const t=new Date(e),n=[];for(let o=0;o<=2;o++){const e=new Date(t);e.setDate(t.getDate()-o),n.push(e.toISOString().split("T")[0])}return n.sort(((e,t)=>new Date(t)-new Date(e)))},d=e.ref(u(s.value));return{username:n,reportData:o,loading:a,selectedDate:s,currentDate:i,displayedDates:d,handleDateChange:e=>{s.value=e.detail.value,r(s.value)},prevDay:()=>{const e=new Date(s.value);e.setDate(e.getDate()-1),s.value=e.toISOString().split("T")[0],r(s.value)},nextDay:()=>{const e=new Date(s.value);e.setDate(e.getDate()+1),s.value=e.toISOString().split("T")[0],r(s.value)},isPrevDisabled:l,isNextDisabled:c,logout:()=>{uni.removeStorageSync("username"),uni.redirectTo({url:"/pages/login/login"})}}}},[["render",function(t,n,o,a,s,i){const r=e.resolveComponent("navbar");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createVNode(r,{username:a.username,onLogout:a.logout},null,8,["username","onLogout"]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"date-picker-container"},[e.createElementVNode("button",{class:"arrow-button",onClick:n[0]||(n[0]=(...e)=>a.prevDay&&a.prevDay(...e)),disabled:a.isPrevDisabled},"《",8,["disabled"]),e.createElementVNode("picker",{mode:"date",value:a.selectedDate,end:a.currentDate,onChange:n[1]||(n[1]=(...e)=>a.handleDateChange&&a.handleDateChange(...e))},[e.createElementVNode("view",{class:"picker"}," 当前选择: "+e.toDisplayString(a.selectedDate),1)],40,["value","end"]),e.createElementVNode("button",{class:"arrow-button",onClick:n[2]||(n[2]=(...e)=>a.nextDay&&a.nextDay(...e)),disabled:a.isNextDisabled},"》",8,["disabled"])]),a.loading?(e.openBlock(),e.createElementBlock("view",{key:0,class:"loading"}," 正在加载报表数据... ")):a.reportData&&a.reportData.dt.length>0?(e.openBlock(),e.createElementBlock("view",{key:1,class:"report-data"},[e.createElementVNode("table",null,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"点检位置"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.displayedDates,((t,n)=>(e.openBlock(),e.createElementBlock("th",{key:n},e.toDisplayString(t),1)))),128))])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.reportData.dt,(t=>(e.openBlock(),e.createElementBlock("tr",{key:t.点检位置},[e.createElementVNode("td",null,e.toDisplayString(t.点检位置),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.displayedDates,((n,o)=>(e.openBlock(),e.createElementBlock("td",{key:o},["1"===t[n]?(e.openBlock(),e.createElementBlock("navigator",{key:0,url:`/pages/detail/detail?position=${t.点检位置}&time=${n}`,"hover-class":"navigator-hover"},[e.createElementVNode("button",{class:"check-button"},[e.createElementVNode("image",{src:u,class:"DuiCuo"})])],8,["url"])):"2"===t[n]?(e.openBlock(),e.createElementBlock("navigator",{key:1,url:`/pages/detail/detail?position=${t.点检位置}&time=${n}`,"hover-class":"navigator-hover"},[e.createElementVNode("button",{class:"check-button"},[e.createElementVNode("image",{src:m,class:"DuiCuo"})])],8,["url"])):(e.openBlock(),e.createElementBlock("span",{key:2,class:"centered-span"},e.toDisplayString(t[n]||"-"),1))])))),128))])))),128))])])])):(e.openBlock(),e.createElementBlock("view",{key:2,class:"no-data"}," 没有找到相关数据。 "))])])}]]);const E=n({components:{Navbar:a},data:()=>({username:uni.getStorageSync("username")||"",detailData:null,loading:!0,selectedHour:8,minHour:0,maxHour:23}),computed:{selectedDate(){if(this.detailData&&this.detailData.dt.length>0){const e=Object.keys(this.detailData.dt[0]).find((e=>e.startsWith("2024-")));if(e)return e.split(" ")[0]}return""},selectedHourKey(){if(this.selectedDate){const e=`${this.selectedDate} ${this.selectedHour.toString().padStart(2,"0")}`;return t("log","at pages/detail/detail.vue:86","selectedHourKey:",e),e}return""},filteredDetailData(){return this.detailData&&this.detailData.dt?(t("log","at pages/detail/detail.vue:93","selectedHourKey in filteredDetailData:",this.selectedHourKey),this.detailData.dt.filter((e=>void 0!==e[this.selectedHourKey]))):[]},isPrevDisabled(){return this.selectedHour<=this.minHour},isNextDisabled(){return this.selectedHour>=this.maxHour}},methods:{async fetchDetail(e,n){try{this.loading=!0;const o=uni.getStorageSync("token");if(!o)return void uni.showToast({title:"未登录，请先登录",icon:"none"});const a=await uni.request({url:"http://13.94.38.44:8080/CheckList/GetScanReport2New",method:"POST",data:{token:o,time:n,Position:e}}),s=JSON.parse(a.data);s.isError?uni.showToast({title:"获取详细数据失败",icon:"none"}):(this.detailData=s,t("log","at pages/detail/detail.vue:129","详细数据加载成功:",this.detailData),this.setInitialSelectedHour())}catch(o){t("error","at pages/detail/detail.vue:138","获取详细数据失败",o),uni.showToast({title:"获取详细数据失败",icon:"none"})}finally{this.loading=!1}},setInitialSelectedHour(){if(this.detailData&&this.detailData.dt.length>0){const e=this.detailData.dt[0],t=Object.keys(e).filter((e=>e.startsWith("2024-"))).sort();for(const n of t){const t=e[n];if("1"===t||"2"===t){const e=parseInt(n.split(" ")[1],10);this.selectedHour=e;break}}}},prevHour(){this.selectedHour>this.minHour&&this.selectedHour--},nextHour(){this.selectedHour<this.maxHour&&this.selectedHour++},logout(){uni.removeStorageSync("username"),uni.redirectTo({url:"/pages/login/login"})},navigateToResult(e){t("log","at pages/detail/detail.vue:178","navigateToResult called with selectedHourKey:",this.selectedHourKey),uni.navigateTo({url:`/pages/result/result?position=${this.detailData.dt[0]["点检位置"]}&project=${e["点检项目"]}&description=${e["点检内容"]}&time=${this.selectedHourKey}:00`})}},onLoad(e){const t=e.position,n=e.time;t&&n?this.fetchDetail(decodeURIComponent(t),decodeURIComponent(n)):(uni.showToast({title:"缺少参数",icon:"none"}),uni.navigateBack())}},[["render",function(t,n,o,a,s,i){const r=e.resolveComponent("navbar");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createVNode(r,{username:s.username,onLogout:i.logout},null,8,["username","onLogout"]),e.createElementVNode("view",{class:"content"},[s.loading?(e.openBlock(),e.createElementBlock("view",{key:0,class:"loading"}," 正在加载数据... ")):s.detailData&&s.detailData.dt.length>0?(e.openBlock(),e.createElementBlock("view",{key:1,class:"detail-data"},[e.createElementVNode("p",null,[e.createElementVNode("strong",null,"点检位置:"),e.createTextVNode(" "+e.toDisplayString(s.detailData.dt[0]["点检位置"]),1)]),e.createElementVNode("table",null,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"点检项目"),e.createElementVNode("th",null,"点检内容"),e.createElementVNode("th",{colspan:"3"},[e.createElementVNode("button",{class:"arrow-button",onClick:n[0]||(n[0]=(...e)=>i.prevHour&&i.prevHour(...e)),disabled:i.isPrevDisabled},"《",8,["disabled"]),e.createTextVNode(" "+e.toDisplayString(s.selectedHour)+":00 ",1),e.createElementVNode("button",{class:"arrow-button",onClick:n[1]||(n[1]=(...e)=>i.nextHour&&i.nextHour(...e)),disabled:i.isNextDisabled},"》",8,["disabled"])])])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.filteredDetailData,((t,n)=>(e.openBlock(),e.createElementBlock("tr",{key:n},[e.createElementVNode("td",null,e.toDisplayString(t.点检项目),1),e.createElementVNode("td",null,e.toDisplayString(t.点检内容),1),e.createElementVNode("td",null,["1"===t[i.selectedHourKey]?(e.openBlock(),e.createElementBlock("navigator",{key:0,url:`/pages/result/result?position=${s.detailData.dt[0]["点检位置"]}&project=${t["点检项目"]}&description=${t["点检内容"]}&time=${i.selectedHourKey}:00`,"hover-class":"navigator-hover"},[e.createElementVNode("button",{class:"status-button check"}," √ ")],8,["url"])):"2"===t[i.selectedHourKey]?(e.openBlock(),e.createElementBlock("button",{key:1,class:"status-button cross",onClick:e=>i.navigateToResult(t)}," × ",8,["onClick"])):(e.openBlock(),e.createElementBlock("span",{key:2},"-"))])])))),128))])])])):(e.openBlock(),e.createElementBlock("view",{key:2,class:"no-data"}," 没有找到相关数据。 "))])])}]]);const w=n({components:{Navbar:a,ImageViewer:v},data:()=>({username:uni.getStorageSync("username")||"",resultData:null,loading:!0,isPreviewVisible:!1,currentPreviewIndex:0}),computed:{currentDetail(){return this.resultData?this.resultData.list[0]:{}}},methods:{async fetchResult(e,n,o,a){try{uni.showLoading({title:"加载中..."});const s=uni.getStorageSync("token");if(!s)return void uni.showToast({title:"未登录，请先登录",icon:"none"});const i=await uni.request({url:"http://13.94.38.44:8080/CheckList/GetScanReport3New",method:"POST",data:{token:s,time:a,Position:e,Project:n,Description:o}});t("log","at pages/result/result.vue:116","Update Status API Response:",i.data);const r=JSON.parse(i.data);r.isError?uni.showToast({title:"更新状态失败",icon:"none"}):(this.resultData=r,t("log","at pages/result/result.vue:120","更新状态成功:",this.resultData))}catch(s){t("error","at pages/result/result.vue:128","更新状态失败",s),uni.showToast({title:"更新状态失败",icon:"none"})}finally{uni.hideLoading(),this.loading=!1}},logout(){uni.removeStorageSync("username"),uni.redirectTo({url:"/pages/login/login"})},previewImage(e){this.currentPreviewIndex=e,this.isPreviewVisible=!0}},onLoad(e){const t=decodeURIComponent(e.position),n=decodeURIComponent(e.project),o=decodeURIComponent(e.description),a=decodeURIComponent(e.time);t&&n&&o&&a?this.fetchResult(t,n,o,a):(uni.showToast({title:"缺少参数",icon:"none"}),uni.navigateBack())}},[["render",function(t,n,o,a,s,i){var r;const l=e.resolveComponent("navbar"),c=e.resolveComponent("image-viewer");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createVNode(l,{username:s.username,onLogout:i.logout},null,8,["username","onLogout"]),e.createElementVNode("view",{class:"content"},[s.loading?(e.openBlock(),e.createElementBlock("view",{key:0,class:"loading"}," 正在加载数据... ")):s.resultData&&s.resultData.list.length>0?(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("view",{class:"header"},e.toDisplayString(s.resultData.list[0].Position),1),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检项目:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(s.resultData.list[0].Project),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检内容:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(s.resultData.list[0].Description),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检结果:"),e.createElementVNode("text",{class:"value"},["1"===s.resultData.list[0].Result?(e.openBlock(),e.createElementBlock("span",{key:0},[e.createElementVNode("image",{src:u,class:"Fuhao"})])):"3"===s.resultData.list[0].Result?(e.openBlock(),e.createElementBlock("span",{key:1},[e.createElementVNode("image",{src:d,class:"Fuhao"})])):"2"===s.resultData.list[0].Result?(e.openBlock(),e.createElementBlock("span",{key:2},[e.createElementVNode("image",{src:m,class:"Fuhao"})])):e.createCommentVNode("",!0)])]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检说明:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(s.resultData.list[0].Remark),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检人:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(s.resultData.list[0].Person),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"点检时间:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(s.resultData.list[0].Time1),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("text",{class:"label"},"设备时间:"),e.createElementVNode("text",{class:"value"},e.toDisplayString(s.resultData.list[0].Time3),1)]),e.createElementVNode("view",{class:"images-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.resultData.list[0].FileLists||[],((t,n)=>(e.openBlock(),e.createElementBlock("image",{key:n,src:"data:image/png;base64,"+t,class:"image",onClick:e=>i.previewImage(n)},null,8,["src","onClick"])))),128))])])):s.loading?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:2,class:"no-data"}," 没有找到相关数据。 "))]),e.createVNode(c,{"is-preview-visible":s.isPreviewVisible,"current-image":(null==(r=i.currentDetail)?void 0:r.FileLists[s.currentPreviewIndex])||"","onUpdate:isPreviewVisible":n[0]||(n[0]=e=>s.isPreviewVisible=e)},null,8,["is-preview-visible","current-image"])])}]]);__definePage("pages/login/login",o),__definePage("pages/inspection/inspection",r),__definePage("pages/home/home",c),__definePage("components/Navbar",a),__definePage("pages/project/project",g),__definePage("pages/Mydianjian/Mydianjian",p),__definePage("pages/remind/remind",h),__definePage("pages/YiChang/YiChang",k),__definePage("pages/report/report",y),__definePage("pages/detail/detail",E),__definePage("pages/result/result",w);const S=n({components:{Navbar:a},data:()=>({username:uni.getStorageSync("username")||"",showNavbar:!1}),onShow(){this.checkCurrentPage()},methods:{checkCurrentPage(){const e=getCurrentPages();if(e.length>0){const t=e[e.length-1].route;this.showNavbar="pages/login/login"!==t}},logout(){uni.removeStorageSync("username"),uni.redirectTo({url:"/pages/login/login"})}}},[["render",function(t,n,o,a,s,i){const r=e.resolveComponent("navbar");return e.openBlock(),e.createElementBlock("view",{class:"app"},[s.showNavbar?(e.openBlock(),e.createBlock(r,{key:0,username:s.username,onLogout:i.logout},null,8,["username","onLogout"])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"content"},[e.renderSlot(t.$slots,"default",{},void 0,!0)])])}],["__scopeId","data-v-f73dc907"]]);const{app:N,Vuex:b,Pinia:f}={app:e.createVueApp(S)};uni.Vuex=b,uni.Pinia=f,N.provide("__globalStyles",__uniConfig.styles),N._component.mpType="app",N._component.render=()=>{},N.mount("#app")}(Vue);
