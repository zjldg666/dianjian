{"version":3,"file":"main.js","sources":["components/Navbar.vue","App.vue","main.js"],"sourcesContent":["<template>\n  <view class=\"navbar\">\n    <view class=\"logoBox\">\n      <image class=\"logo\" src=\"../static/logo.png\" mode=\"heightFix\"></image>\n    </view>\n    \n    <!-- 只有当username存在时才显示用户名和退出按钮 -->\n    <template v-if=\"username\">\n      <view class=\"username\">{{ username }}</view>\n      <button @click=\"$emit('logout')\" class=\"nabutton\">退出</button>\n    </template>\n  </view>\n</template>\n\n<script >\nexport default {\n  props: {\n    username: {\n      type: String,\n      default: null // 设置默认值为null，便于判断\n    }\n  }\n}\n</script>\n\n<style scoped>\n.navbar {\n  width: 100%;\n  height: 90rpx;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  opacity: 1;\n  background: white;\n  color: black;\n  border-bottom: 1px solid #ccc; \n}\n.logoBox {\n  position: absolute;\n  left: 32rpx;\n  top: 14rpx;\n  width: 60rpx;\n  height: 60rpx;\n  opacity: 1;\n}\n.logo {\n  height: 60rpx;\n}\n.username {\n  margin-right: 20rpx; /* 增加间距，使布局更合理 */\n  font-size: 28rpx;\n}\n.nabutton {\n  margin: 10rpx;\n  padding: 0;\n  width: 180rpx;\n  background-color: white;\n  color: black;\n  box-shadow: 0 0 20rpx rgba(0,0,0,0.1);\n  cursor: pointer;\n  font-size: 28rpx;\n}\n/* 修复按钮激活状态的类名错误 */\n.nabutton:active {\n  background-color: white;\n  color: white;\r\n   transform: scale(0.95) rotateZ(1.7deg);\n}\n</style>\n","<template>\r\n  <view class=\"app\">\r\n    <navbar v-if=\"showNavbar\" :username=\"username\" @logout=\"logout\"/>\r\n    <view class=\"content\">\r\n      <slot></slot>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport Navbar from './components/Navbar.vue';\r\n\r\nexport default {\r\n  components: {\r\n    Navbar\r\n  },\r\n  data() {\r\n    return {\r\n      username: uni.getStorageSync('username') || '',\r\n      showNavbar: false // 控制 Navbar 的显示\r\n    };\r\n  },\r\n  onShow() {\r\n    this.checkCurrentPage();\r\n  },\r\n  methods: {\r\n    checkCurrentPage() {\r\n      const pages = getCurrentPages();\r\n      if (pages.length > 0) {\r\n        const currentPage = pages[pages.length - 1].route;\r\n        this.showNavbar = currentPage !== 'pages/login/login'; // 非登录页面显示 Navbar\r\n      }\r\n    },\r\n    logout() {\r\n      // 清除用户信息并跳转到登录页面\r\n      uni.removeStorageSync('username');\r\n      uni.redirectTo({\r\n        url: '/pages/login/login'\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.app {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  background-color: #E6E6E6; /* 设置背景色为灰色 */\r\n}\r\n.content {\r\n  flex: 1;\r\n}\r\n</style>\r\n\r\n","import App from './App'\r\n\r\n// #ifndef VUE3\r\nimport Vue from 'vue'\r\nimport './uni.promisify.adaptor'\r\n// 预览图片所用组件\r\nimport Viewer from 'v-viewer'; \r\nimport 'viewerjs/dist/viewer.css';\r\n Vue.use(Viewer);\r\n\r\nVue.config.productionTip = false\r\nApp.mpType = 'app'\r\nconst app = new Vue({\r\n  ...App\r\n})\r\napp.$mount()\r\n// #endif\r\n\r\n// #ifdef VUE3\r\nimport { createSSRApp } from 'vue'\r\nexport function createApp() {\r\n  const app = createSSRApp(App)\r\n  return {\r\n    app\r\n  }\r\n}\r\n// #endif"],"names":["_sfc_main","Navbar","uni","createSSRApp"],"mappings":";;;;;;;;;;;;;;;;;AAeA,MAAKA,cAAU;AAAA,EACb,OAAO;AAAA,IACL,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA;AAAA,IACX;AAAA,EACF;AACF;;;;;;;;;;;ACVA,MAAK,YAAU;AAAA,EACb,YAAY;AAAA,YACVC;AAAAA,EACD;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,UAAUC,cAAG,MAAC,eAAe,UAAU,KAAK;AAAA,MAC5C,YAAY;AAAA;AAAA;EAEf;AAAA,EACD,SAAS;AACP,SAAK,iBAAgB;AAAA,EACtB;AAAA,EACD,SAAS;AAAA,IACP,mBAAmB;AACjB,YAAM,QAAQ;AACd,UAAI,MAAM,SAAS,GAAG;AACpB,cAAM,cAAc,MAAM,MAAM,SAAS,CAAC,EAAE;AAC5C,aAAK,aAAa,gBAAgB;AAAA,MACpC;AAAA,IACD;AAAA,IACD,SAAS;AAEPA,0BAAI,kBAAkB,UAAU;AAChCA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACP,CAAC;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;ACrBO,SAAS,YAAY;AAC1B,QAAM,MAAMC,cAAY,aAAC,GAAG;AAC5B,SAAO;AAAA,IACL;AAAA,EACD;AACH;;;;"}