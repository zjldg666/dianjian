{"version":3,"file":"project.js","sources":["pages/project/project.vue","../../../../Download/HBuilder-alpha/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvamVjdC9wcm9qZWN0LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <navbar :username=\"username\" @logout=\"logout\"/>\r\n    <view class=\"title\">{{ inspectionPoint.name }} > {{ currentProject }}</view>\r\n    <view class=\"content\">\r\n      <view v-if=\"currentItem\">\r\n        <view class=\"item\">\r\n          <!-- 点检内容描述 -->\r\n          <view class=\"item-title\">{{ currentItem.Description }}</view>\r\n          <!-- 选择结果 -->\r\n          <view class=\"form-group\">\r\n            <label>选择结果：</label>\r\n            <view class=\"button-group\">\r\n              <button :class=\"{'selButton': true, 'selected': currentItem.flag === 'OK'}\" @click=\"handleFlagChange('OK')\">\r\n                <image src=\"../../static/dui.png\" class=\"icon-image\" />\r\n              </button>\r\n              <button :class=\"{'selButton': true, 'selected': currentItem.flag === '有问题，但已经解决'}\" @click=\"handleFlagChange('有问题，但已经解决')\">\r\n                <image src=\"../../static/NT.png\" class=\"icon-image\" />\r\n              </button>\r\n              <button :class=\"{'selButton': true, 'selected': currentItem.flag === 'NG'}\" @click=\"handleFlagChange('NG')\">\r\n                <image src=\"../../static/cuo.png\" class=\"icon-image\" />\r\n              </button>\r\n            </view>\r\n          </view>\r\n\r\n          <!-- 点检说明 -->\r\n          <view class=\"form-group\">\r\n            <label>点检说明：</label>\r\n            <input type=\"text\" v-model=\"currentItem.remarks\" class=\"input\" />\r\n          </view>\r\n\r\n          <!-- 上传图片 -->\r\n          <view class=\"form-group\">\r\n            <label>上传图片：</label>\r\n            <button @click=\"uploadImage\" class=\"button\">+</button>\r\n            <view v-if=\"currentItem.images && currentItem.images.length > 0\">\r\n              <view v-for=\"(image, index) in currentItem.images\" :key=\"index\" class=\"image-preview\">\r\n                <image :src=\"image\" class=\"preview-image\" />\r\n                <button @click=\"deleteImage(index)\" class=\"delete-button\">X</button>\r\n              </view>\r\n            </view>\r\n          </view>\r\n\r\n          <!-- 上一项和下一项按钮 -->\r\n          <view class=\"button-group\">\r\n            <button @click=\"prevItem\" :disabled=\"currentItemIndex === 0\" class=\"button\">上一项</button>\r\n            <button @click=\"nextOrFinishItem\" class=\"button\">{{ currentItemIndex === inspectionItems.length - 1 ? '点检成功' : '下一项' }}</button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view v-else>\r\n        <!-- 完成信息显示 -->\r\n        <view class=\"message\">所有点检项目完成</view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n\r\n<script>\r\nimport Navbar from '@/components/Navbar.vue';\r\n\r\n/**\r\n * 图片地址转换为base64格式图片\r\n * @param {string} url 图片地址 可网络地址、本地相对路径\r\n * @param {string} type base64图片类型 默认png\r\n */\r\n/**\n * 图片地址转换为base64格式图片 - 支持鸿蒙系统\n * @param {string} url 图片地址 可网络地址、本地相对路径、鸿蒙媒体路径\n * @param {string} type base64图片类型 默认png\n */\nfunction urlToBase64(url, type = 'png') {\n  if (typeof url !== 'string' || url.trim() === '') {\n    return Promise.reject(new Error('Invalid URL'));\n  }\n\n  return new Promise((resolve, reject) => {\n    if (url.startsWith('http')) {\n      // 网络地址 使用request方式\n      uni.request({\n        url: url,\n        method: 'GET',\n        responseType: 'arraybuffer',\n        success: (res) => {\n          const base64 = `data:image/${type};base64,${uni.arrayBufferToBase64(res.data)}`;\n          resolve(base64);\n        },\n        fail: (err) => {\n          reject(new Error(`Request failed: ${err}`));\n        }\n      });\n    } else if (url.startsWith('file://media/Photo/')) {\n      // 鸿蒙系统媒体文件路径\n      // #ifdef APP-PLUS\n      // 鸿蒙系统特殊处理\n      plus.io.resolveLocalFileSystemURL(url, (entry) => {\n        entry.file((file) => {\n          const reader = new plus.io.FileReader();\n          reader.onload = function(e) {\n            resolve(e.target.result);\n          };\n          reader.onerror = function(error) {\n            // 如果FileReader失败，尝试其他方法\n            console.error('FileReader failed:', error);\n            // 尝试使用uni.compressImage处理\n            uni.compressImage({\n              src: url,\n              quality: 100,\n              success: (res) => {\n                const tempPath = res.tempFilePath;\n                plus.io.resolveLocalFileSystemURL(tempPath, (entry2) => {\n                  entry2.file((file2) => {\n                    const reader2 = new plus.io.FileReader();\n                    reader2.onload = function(e2) {\n                      resolve(e2.target.result);\n                    };\n                    reader2.onerror = function(error2) {\n                      reject(new Error(`File read failed: ${error2.message}`));\n                    };\n                    reader2.readAsDataURL(file2);\n                  }, (error2) => {\n                    reject(new Error(`File resolution failed: ${error2.message}`));\n                  });\n                }, (error2) => {\n                  reject(new Error(`File resolution failed: ${error2.message}`));\n                });\n              },\n              fail: (err) => {\n                reject(new Error(`Compress image failed: ${err}`));\n              }\n            });\n          };\n          reader.readAsDataURL(file);\n        }, (error) => {\n          reject(new Error(`File resolution failed: ${error.message}`));\n        });\n      }, (error) => {\n        reject(new Error(`File resolution failed: ${error.message}`));\n      });\n      // #endif\n      \n      // #ifdef APP-PLUS-HARMONY\n      // 鸿蒙系统专用处理\n      try {\n        // 使用鸿蒙特有的文件处理方式\n        const fs = weex.requireModule('stream');\n        // 或者使用uni-app提供的鸿蒙文件API\n        uni.getFileSystemManager().readFile({\n          filePath: url,\n          encoding: 'base64',\n          success: (res) => {\n            const base64 = `data:image/${type};base64,${res.data}`;\n            resolve(base64);\n          },\n          fail: (error) => {\n            console.error('鸿蒙读取文件失败:', error);\n            // 如果直接读取失败，尝试先复制到临时路径\n            const tempPath = `_doc/temp_${Date.now()}.${type}`;\n            uni.saveFile({\n              tempFilePath: url,\n              filePath: tempPath,\n              success: (saveRes) => {\n                uni.getFileSystemManager().readFile({\n                  filePath: saveRes.savedFilePath,\n                  encoding: 'base64',\n                  success: (readRes) => {\n                    const base64 = `data:image/${type};base64,${readRes.data}`;\n                    resolve(base64);\n                  },\n                  fail: (readError) => {\n                    reject(new Error(`鸿蒙文件读取失败: ${readError.errMsg}`));\n                  }\n                });\n              },\n              fail: (saveError) => {\n                reject(new Error(`鸿蒙文件保存失败: ${saveError.errMsg}`));\n              }\n            });\n          }\n        });\n      } catch (e) {\n        reject(new Error(`鸿蒙系统处理失败: ${e.message}`));\n      }\n      // #endif\n    } else {\n      // Android或其他系统本地路径\n      // #ifdef APP-PLUS\n      uni.compressImage({\n        src: url,\n        quality: 100,\n        success: (res) => {\n          const tempUrl = res.tempFilePath;\n          plus.io.resolveLocalFileSystemURL(tempUrl, (entry) => {\n            entry.file((e) => {\n              let fileReader = new plus.io.FileReader();\n              fileReader.onload = (r) => {\n                resolve(r.target.result);\n              };\n              fileReader.onerror = (error) => {\n                reject(new Error(`File resolution failed: ${error.message}`));\n              };\n              fileReader.readAsDataURL(e);\n            }, (error) => {\n              reject(new Error(`File resolution failed: ${error.message}`));\n            });\n          }, (error) => {\n            reject(new Error(`File resolution failed: ${error.message}`));\n          });\n        },\n        fail: (err) => {\n          reject(new Error(`Compress image failed: ${err}`));\n        }\n      });\n      // #endif\n\n      // #ifndef APP-PLUS\n      reject(new Error('This method is only supported in the APP environment for local files.'));\n      // #endif\n    }\n  });\n}\r\n\r\nexport default {\r\n  components: {\r\n    Navbar\r\n  },\r\n  data() {\r\n    return {\r\n      username: uni.getStorageSync('username') || '',\r\n      inspectionPoint: { id: '', name: '' },\r\n      inspectionItems: [], // 初始化为空数组\r\n      currentItemIndex: 0,\r\n      currentProject: ''\r\n    };\r\n  },\r\n  onLoad(options) {\r\n    // 初始化检查点信息\r\n    this.inspectionPoint.id = options.id;\r\n    this.inspectionPoint.name = options.name;\r\n    const token = uni.getStorageSync('token');\r\n    // 加载点检详情\r\n    this.loadInspectionDetails(this.inspectionPoint.id, token);\r\n\r\n  },\r\n  onPullDownRefresh() {\r\n    // 处理下拉刷新\r\n    const id = this.inspectionPoint.id;\r\n    const token = uni.getStorageSync('token');\r\n    if (!id) {\r\n      console.error('id 参数为空');\r\n      uni.stopPullDownRefresh(); // 停止下拉刷新\r\n      return;\r\n    }\r\n    this.loadInspectionDetails(id, token, () => {\r\n      uni.stopPullDownRefresh(); // 停止下拉刷新动作\r\n    });\r\n  },\r\n  computed: {\r\n    // 计算当前项\r\n    currentItem() {\r\n      return this.inspectionItems[this.currentItemIndex] || null;\r\n    }\r\n  },\r\n  methods: {\r\n    // 加载点检详情\r\n    loadInspectionDetails(id, token, callback) {\r\n      if (!id) {\r\n        console.error('id 参数为空');\r\n        return;\r\n      }\r\n      console.log('请求参数:', { code: id, token: token });\r\n      uni.request({\r\n        url: 'http://13.94.38.44:8080/CheckList/GetCheckListDetailNew',\r\n        method: 'POST',\r\n        data: {\r\n          code: id,\r\n          token: token\r\n        },\r\n        success: (res) => {\r\n          const data = JSON.parse(res.data);\r\n          if (!data.isError) {\r\n            this.inspectionItems = data.dt.map(item => ({\r\n              ...item,\r\n              remarks: '',\r\n              images: [], // 初始化 images 数组\r\n              flag: '' // 初始值为空\r\n            }));\r\n            this.currentProject = this.inspectionItems[0]?.Project || '';\r\n            console.log('点检详情加载成功:', this.inspectionItems);\r\n          } else {\r\n            console.error('加载点检详情失败:', data.message);\r\n          }\r\n          if (callback) callback(); // 确保回调被调用\r\n        },\r\n        fail: (err) => {\r\n          console.error('加载点检详情失败:', err);\r\n          if (callback) callback(); // 确保回调被调用\r\n        }\r\n      });\r\n    },\r\n    // OK, NT, NG 选择结果\r\n    handleFlagChange(flag) {\r\n      this.currentItem.flag = flag;\r\n    },\r\n    // 上一项\r\n    prevItem() {\r\n      if (this.currentItemIndex > 0) {\r\n        this.currentItemIndex--;\r\n        this.currentProject = this.inspectionItems[this.currentItemIndex].Project;\r\n      }\r\n    },\r\n // 下一项或完成检查\r\n nextOrFinishItem() {\r\n   if (this.currentItem.flag) {\r\n     if (this.currentItem.flag === 'NG') {\r\n       if (!this.currentItem.remarks.trim()) {\r\n         uni.showToast({\r\n           title: '请填写点检说明',\r\n           icon: 'none'\r\n         });\r\n         return;\r\n       }\r\n       if (!this.currentItem.images || this.currentItem.images.length === 0) {\r\n         uni.showToast({\r\n           title: '请上传至少一张图片',\r\n           icon: 'none'\r\n         });\r\n         return;\r\n       }\r\n     } else if (this.currentItem.flag === '有问题，但已经解决') {\r\n       if (!this.currentItem.remarks.trim()) {\r\n         uni.showToast({\r\n           title: '请填写点检说明',\r\n           icon: 'none'\r\n         });\r\n         return;\r\n       }\r\n     }\r\n \r\n     if (this.currentItemIndex < this.inspectionItems.length - 1) {\r\n       this.nextItem();\r\n     } else {\r\n       console.log('当前 inspectionItems:', this.inspectionItems);\r\n       this.saveInspection();\r\n     }\r\n   } else {\r\n     uni.showToast({\r\n       title: '请先选择结果',\r\n       icon: 'none'\r\n     });\r\n   }\r\n },\r\n    // 下一项\r\n    nextItem() {\r\n      if (this.currentItemIndex < this.inspectionItems.length - 1) {\r\n        this.currentItemIndex++;\r\n        this.currentProject = this.inspectionItems[this.currentItemIndex].Project;\r\n      }\r\n    },\r\n    // 选择图片\r\n    uploadImage() {\r\n      uni.chooseImage({\r\n        count: 9, // 支持最多选择9张图片\r\n        success: (res) => {\r\n          if (res.tempFilePaths.length > 0) {\r\n            if (!this.currentItem.images) {\r\n              this.$set(this.currentItem, 'images', []);\r\n            }\r\n            this.convertImagesToBase64(res.tempFilePaths); // 转换为 Base64 编码\r\n          }\r\n        },\r\n        fail: (err) => {\r\n          console.error('选择图片失败:', err);\r\n        }\r\n      });\r\n    },\r\n\t\r\n// 将图片路径转换为 Base64 编码\nconvertImagesToBase64(imagePaths) {\n  const promises = imagePaths.map(imagePath => {\n    return urlToBase64(imagePath).catch(err => {\n      console.error('转换图片失败，使用原始路径:', err, imagePath);\n      // 如果转换失败，直接使用原始路径\n      return imagePath;\n    });\n  });\n\n  Promise.all(promises).then(base64Images => {\n    // 更新 images 数组中的 Base64 编码\n    this.currentItem.images.push(...base64Images);\n    console.log('图片路径数组:', this.currentItem.images);\n    this.$forceUpdate(); // 强制更新视图\n  }).catch(err => {\n    console.error('转换图片为 Base64 编码失败:', err);\n  });\n},\r\n    // 删除图片\r\n    deleteImage(index) {\r\n      this.currentItem.images.splice(index, 1);\r\n    },\r\n    // 保存点检详情\r\n    saveInspection() {\r\n      if (!this.inspectionItems || !this.inspectionItems.length) {\r\n        console.error('inspectionItems 未定义或为空');\r\n        return;\r\n      }\r\n\r\n      uni.showLoading({\r\n        title: '正在上传数据...'\r\n      });\r\n\r\n      const token = uni.getStorageSync('token');\r\n      const inspectionData = {\r\n        token: token,\r\n        list: this.inspectionItems.map(item => {\r\n          const now = new Date();\r\n          const formattedTime = `${now.getFullYear()}:${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}:${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}${String(now.getSeconds()).padStart(2, '0')}`;\r\n          return {\r\n            ID: item.ID,\r\n            Time: formattedTime,\r\n            Flag: item.flag || 'NG',\r\n            FileList: (item.images || []).map(image => image), // 确保 FileList 包含 Base64 编码\r\n            Remark: item.remarks || ''\r\n          };\r\n        })\r\n      };\r\n\r\n      console.log('发送到 SaveDetail 接口的数据:', inspectionData);\r\n\r\n      uni.request({\r\n        url: 'http://13.94.38.44:8080/CheckList/SaveDetail',\r\n        method: 'POST',\r\n        header: {\r\n          'content-type': 'application/json'\r\n        },\r\n        data: inspectionData,\r\n        success: (res) => {\r\n          console.log('第一次请求返回数据为:', res.data); // 打印原始响应数据\r\n          if (typeof res.data === 'string') {\r\n            try {\r\n              const data = JSON.parse(res.data);\r\n              if (!data.isError) {\r\n                const docnum = data.docnum;\r\n                this.saveFinalResult(docnum, token);\r\n              } else {\r\n                uni.showToast({\r\n                  title: data.msg || '保存失败',\r\n                  icon: 'none'\r\n                });\r\n                console.error('保存点检详情失败:', data.msg);\r\n              }\r\n            } catch (parseError) {\r\n              console.error('解析第一次请求返回数据时出错:', parseError);\r\n            }\r\n          } else {\r\n            console.error('第一次请求响应数据不是字符串:', res.data);\r\n          }\r\n        },\r\n        fail: (err) => {\r\n          console.error('保存点检详情失败:', err);\r\n        }\r\n      });\r\n    },\r\n    // 保存最终的检查结果\r\n    saveFinalResult(docnum, token) {\r\n      uni.request({\r\n        url: 'http://13.94.38.44:8080/CheckList/SaveDetail2',\r\n        method: 'POST',\r\n        data: {\r\n          docnum: docnum,\r\n          token: token\r\n        },\r\n        success: (res) => {\r\n          console.log('第二次请求返回数据为:', res.data); // 打印原始响应数据\r\n          if (typeof res.data === 'string') {\r\n            try {\r\n              const result = JSON.parse(res.data);\r\n              if (!result.IsError) {\r\n                uni.showToast({\r\n                  title: '检查成功',\r\n                  icon: 'success'\r\n                });\r\n                uni.redirectTo({\r\n                  url: '/pages/home/home'\r\n                });\r\n              } else {\r\n                uni.showToast({\r\n                  title: result.msg,\r\n                  icon: 'none'\r\n                });\r\n                console.error('保存检查结果失败:', result.msg);\r\n              }\r\n            } catch (parseError) {\r\n              console.error('解析第二次请求返回数据时出错:', parseError);\r\n            }\r\n          } else {\r\n            console.error('第二次请求响应数据不是字符串:', res.data);\r\n          }\r\n        },\r\n        fail: (err) => {\r\n          console.error('保存检查结果失败:', err);\r\n        }\r\n      });\r\n    },\r\n    // 退出登录\r\n    logout() {\r\n      uni.removeStorageSync('username');\r\n      uni.redirectTo({\r\n        url: '/pages/login/login'\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n\t\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  background-color: white;\r\n}\r\n.content {\r\n\twidth: 100%%;\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n \r\n}\r\n.title {\r\n  font-size: 40rpx;\r\n  margin:40rpx 20rpx;\r\n}\r\n.image-preview {\r\n  position: relative;\r\n  display: inline-block;\r\n  margin: 20rpx;\r\n}\r\n.preview-image {\r\n  width: 160rpx;\r\n  height: 160rpx;\r\n}\r\n.delete-button {\r\n position: absolute;\r\n   top: 0;\r\n   right: 0;\r\n   width: 60rpx;\r\n   height: 60rpx;\r\n   background-color: red;\r\n   color: white;\r\n   border: none;\r\n   border-radius: 50%;\r\n   display: flex;\r\n   align-items: center;\r\n   justify-content: center;\r\n   cursor: pointer;\r\n}\r\n\r\n.item {\r\n  width: 600rpx;\r\n  padding: 40rpx;\r\n  background-color: #fff;\r\n  box-shadow: 0 0 20rpx rgba(0,0,0,0.1);\r\n  border-radius: 20rpx;\r\n  margin-bottom: 40rpx;\r\n}\r\n.item-title {\r\n  font-size: 40rpx;\r\n  margin-bottom: 40rpx;\r\n}\r\n.form-group {\r\n  margin-bottom: 30rpx;\r\n  \r\n}\r\n.input {\r\n  width: 93%;\r\n  padding: 20rpx;\r\n  border: 2rpx solid #ccc;\r\n  border-radius: 10rpx;\r\n}\r\n.button-group{\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n}\r\n.Picbutton{\r\n\twidth: 90%;\r\n\tpadding: 20rpx;\r\n\tbackground-color: #007aff;\r\n\tcolor: #fff;\r\n\ttext-align: center;\r\n\tborder: none;\r\n\tborder-radius: 10rpx;\r\n\tcursor: pointer;\r\n}\r\n.button {\r\n  width: 40%;\r\n  padding: 20rpx;\r\n  background-color: #007aff;\r\n  color: #fff;\r\n  text-align: center;\r\n  border: none;\r\n  border-radius: 10rpx;\r\n  cursor: pointer;\r\n}\r\n.selButton {\r\n  width: 100rpx; /* 设置固定宽度 */\r\n  height: 100rpx; /* 设置固定高度 */\r\n  margin: 10rpx;\r\n  background-color: white; /* 默认灰色 */\r\n  color: #fff;\r\n  text-align: center;\r\n  border: none;\r\n  outline: none;\r\n  border-radius: 50%; /* 圆形按钮 */\r\n  cursor: pointer;\r\n  display: flex; /* Flex 布局 */\r\n  align-items: center; /* 垂直居中 */\r\n  justify-content: center; /* 水平居中 */\r\n  overflow: hidden; /* 防止内容超出圆形边界 */\r\n}\r\n.selButton.selected {\r\n  background-color: #007aff; /* 选择后蓝色 */\r\n}\r\n.icon-image {\r\n  max-width: 100%; /* 图片最大宽度 */\r\n  max-height: 44rpx; /* 图片最大高度 */\r\n  border-radius: 50%; /* 确保图片也是圆形 */\r\n}\r\n\r\n\r\n\r\n.uploaded-image {\r\n  width: 200rpx;\r\n  height: 200rpx;\r\n  margin-top: 20rpx;\r\n}\r\n.message {\r\n  font-size: 36rpx;\r\n  color: #333;\r\n  margin-bottom: 40rpx;\r\n}\r\n.button:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n.button:active {\r\n  background-color: #005bb5;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/Project/HBuilderProjects/dianjianHmS/dianjian02/pages/project/project.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}